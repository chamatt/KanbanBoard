(this["webpackJsonpreact-drag-n-drop"]=this["webpackJsonpreact-drag-n-drop"]||[]).push([[0],{68:function(t,e,a){t.exports=a(90)},89:function(t,e,a){},90:function(t,e,a){"use strict";a.r(e);var n=a(0),s=a.n(n),r=a(19),i=a.n(r),o=a(17),d=a(14),c=a(99),l=a(32),u=a(35),b=a(43),m=a(44),f=a(98);function k(){var t=Object(b.a)([""]);return k=function(){return t},t}function p(){var t=Object(b.a)(["\n  border: 1px solid lightgrey;\n  border-radius: 2px;\n  padding: 8px;\n  margin-bottom: 8px;\n  background-color: white;\n  display: flex;\n  flex-direction: column;\n"]);return p=function(){return t},t}m.a.div(p());var v=Object(m.a)(f.a).attrs((function(t){return{variantColor:(e=t.priority,{high:"red",medium:"blue",low:"green"}[e]||"blue"),rounded:"md",fontSize:"10px",p:"5px",variant:"subtle"};var e}))(k()),j=a(96),y=a(93),O=a(58),I=a(94),g=a(95),E=a(60),h=function(t){var e=t.fieldId,a=t.onCreate,s=t.onEdit,r=t.autoFocus,i=void 0!==r&&r,o=Object(n.useState)(""),d=Object(u.a)(o,2),c=d[0],l=d[1],b=Object(n.useState)(i),m=Object(u.a)(b,2),f=m[0],k=m[1],p=Object(n.useRef)(null);Object(n.useEffect)((function(){var t;f&&(null===p||void 0===p?void 0:p.current)&&(null===p||void 0===p||null===(t=p.current)||void 0===t||t.focus())}),[f,p]);var v=function(){c.length>0?(a(c),k(!1),l("")):k(!1)},j=function(){e&&c.length>0?(s(e,c),k(!1),l("")):k(!1)};return{field:c,setField:l,isEditing:f,setIsEditing:k,onKeyPressed:function(t){"Enter"===t.key&&(e?j():v())},handleBlur:function(){e?j():v()},handleChange:function(t){return l(t.target.value)},inputRef:p}},S=s.a.memo((function(t){var e=t.statusId,a=t.task,r=t.index,i=t.draggable,o=void 0===i||i,c=t.autoFocus,u=void 0!==c&&c,b=(t.showAddTask,t.createTask),m=t.deleteTask,f=t.editTask,k=Object(d.b)().colorMode,p={light:"whiteAlpha.900",dark:"gray.800"},S=h({autoFocus:u,fieldId:null===a||void 0===a?void 0:a.id,onCreate:function(t){return b({statusId:e,content:t})},onEdit:function(t,e){return f({id:t,content:e})}}),x=S.field,w=S.isEditing,T=S.setIsEditing,C=S.setField,P=S.inputRef,B=S.handleBlur,z=S.handleChange,D=S.onKeyPressed;Object(n.useEffect)((function(){var t;u&&(null===P||void 0===P?void 0:P.current)&&(null===P||void 0===P||null===(t=P.current)||void 0===t||t.focus())}),[u,P]);var R=function(t){var e=t.dragHandleProps,n=void 0===e?{}:e;return s.a.createElement(y.a,{justify:"space-between",direction:"row"},s.a.createElement(y.a,Object.assign({p:2,flex:1,justify:"space-between",direction:"column",wrap:"nowrap"},n),w||u?s.a.createElement(j.a,{onBlur:B,onClick:function(t){return t.stopPropagation()},ref:P,value:x,onKeyPress:D,onChange:z,variant:"outline",placeholder:"Task Name",size:"sm"}):s.a.createElement(O.a,{fontSize:"sm",userSelect:"none"},null===a||void 0===a?void 0:a.content),(null===a||void 0===a?void 0:a.priority)&&"none"!==(null===a||void 0===a?void 0:a.priority)&&s.a.createElement(y.a,{pt:2},s.a.createElement(v,{userSelect:"none",priority:a.priority},a.priority))),s.a.createElement(y.a,{justify:"flex-start",p:2},F()))},F=function(){return s.a.createElement(I.d,{closeOnBlur:!0,closeOnSelect:!0},s.a.createElement(I.a,{size:"xs",as:g.a,onClick:function(t){t.stopPropagation()},variant:"ghost"},s.a.createElement(E.a,{name:"edit"})),s.a.createElement(I.c,null,s.a.createElement(I.b,{onClick:function(t){t.stopPropagation(),T(!0),C((null===a||void 0===a?void 0:a.content)||"")}},"Rename"),(null===a||void 0===a?void 0:a.id)&&s.a.createElement(I.b,{onClick:function(){return m({id:a.id})}},"Delete")))};return s.a.createElement(l.b,{draggableId:(null===a||void 0===a?void 0:a.id)||"test",index:r,isDragDisabled:!o},(function(t){var e=t.draggableProps,a=t.dragHandleProps,n=t.innerRef;return s.a.createElement(y.a,Object.assign({bg:p[k],direction:"column",mb:2,boxShadow:"md",rounded:"md",onClick:function(){return console.log("Open Modal")}},e,{ref:n}),R({dragHandleProps:a}))}))})),x=a(5),w=a(20),T=function(t){var e=t.onClick;return s.a.createElement(w.a,{as:"button",display:"flex",width:"100%",flexDirection:"row",p:2,mb:2,boxShadow:"xs",rounded:"md",cursor:"pointer",alignItems:"center",_hover:{opacity:.5},opacity:.8,onClick:e},s.a.createElement(E.a,{name:"add",size:"10px"}),s.a.createElement(O.a,{fontSize:"sm",pl:2},"Add New Task"))},C=function(t){var e,a=t.column,r=t.createStatus,i=t.editStatus,o=t.createTask,d=t.deleteTask,c=t.editTask,b=null===a||void 0===a?void 0:a.tasks,m=h({fieldId:null===a||void 0===a?void 0:a.id,onCreate:function(t){return r({title:t})},onEdit:function(t,e){return i({id:t,title:e})}}),f=m.field,k=m.isEditing,p=m.setIsEditing,v=m.setField,w=m.inputRef,C=m.handleBlur,P=m.handleChange,B=m.onKeyPressed,z=Object(n.useState)(!1),D=Object(u.a)(z,2),R=D[0],F=D[1],K=function(){return s.a.createElement(j.a,{onBlur:C,ref:w,value:f,onKeyPress:B,onChange:P,variant:"unstyled",placeholder:"Status name"})};return s.a.createElement(x.a,{minH:"60vh",minW:200,w:{base:"100%",sm:"50%",md:300},p:3},a?(e=a,s.a.createElement(y.a,{mb:4,px:2,justify:"space-between",align:"center"},k?K():s.a.createElement(O.a,{fontSize:"md",fontWeight:"bold"},e.title),s.a.createElement(I.d,{closeOnBlur:!0,closeOnSelect:!0},s.a.createElement(I.a,{as:g.a,size:"sm",variant:"ghost"},s.a.createElement(E.a,{name:"chevron-down"})),s.a.createElement(I.c,null,s.a.createElement(I.b,{onClick:function(){p(!0),v((null===a||void 0===a?void 0:a.title)||"")}},"Edit Status Name"),s.a.createElement(I.b,null,"Remove Status"))))):s.a.createElement(y.a,{mb:4,px:2,justify:"space-between",align:"center"},k?K():s.a.createElement(g.a,{onClick:function(){return p(!0)},leftIcon:"add",size:"sm",bg:"transparent"},"Add a group")),a&&b&&function(t){return s.a.createElement(l.c,{droppableId:t.id},(function(t){var e=t.droppableProps,n=t.innerRef,r=t.placeholder;return s.a.createElement(x.a,Object.assign({minH:200,ref:n},e),a&&b&&b.map((function(t,e){return s.a.createElement(S,{statusId:a.id,createTask:o,deleteTask:d,editTask:c,key:null===t||void 0===t?void 0:t.id,task:t,index:e})})),a&&R&&s.a.createElement(S,{statusId:a.id,createTask:function(t){o(t),F(!1)},deleteTask:d,editTask:c,draggable:!1,autoFocus:!0,key:"".concat(a.id,"/taks-").concat((null===b||void 0===b?void 0:b.length)||0),index:(null===b||void 0===b?void 0:b.length)||0}),r,a&&!R&&s.a.createElement(T,{key:"".concat(a.id),onClick:function(){return F(!0)}}))}))}(a))};var P=function(){var t=Object(d.b)(),e=t.colorMode,a=t.toggleColorMode;return s.a.createElement(y.a,{w:"100%",h:50,justify:"space-between",align:"center",px:8,py:4,borderBottomWidth:"1px"},s.a.createElement(x.a,{flex:2},s.a.createElement(O.a,{fontWeight:"bold"},"Kaban Board")),s.a.createElement(y.a,{flex:1,justify:"flex-end"},s.a.createElement(g.a,{size:"sm",onClick:a,variant:"ghost"},s.a.createElement(E.a,{name:"light"===e?"moon":"sun"}))))},B=a(11),z=a(65),D=a(66),R=a(25),F=a(16),K=a(8),A=a(97),H=a(42),M={data:{tasks:{byId:{"task-1":{id:"task-1",content:"Wash the dishes",priority:"low"},"task-2":{id:"task-2",content:"Procratinate",priority:"high"},"task-3":{id:"task-3",content:"Do some actual work",priority:"medium"},"task-4":{id:"task-4",content:"Sleep, please! \ud83d\ude22\ud83d\ude22\ud83d\ude22\ud83d\ude22",priority:"low"},"task-5":{id:"task-5",content:"Stay awake at all costs!",priority:"high"}},allIds:["task-1","task-2","task-3","task-4","task-5"]},status:{byId:{"column-1":{id:"column-1",title:"To Do",tasks:["task-1","task-2"]},"column-2":{id:"column-2",title:"Doing",tasks:["task-3","task-4","task-5"]}},allIds:["column-1","column-2"]}},tasksByStatus:Object(B.c)((function(t){var e=t.data,a=e.tasks,n=e.status,s=n.allIds.map((function(t){return n.byId[t]})),r=function(t){return a.byId[t]};return s.map((function(t){return Object(K.a)({},t,{tasks:(e=t.tasks,e.map(r))});var e}))})),setStatus:Object(B.b)((function(t,e){t.data.status=e})),setTasks:Object(B.b)((function(t,e){t.data.tasks=e})),createStatus:Object(B.b)((function(t,e){var a=Object(A.a)();t.data.status={byId:Object(K.a)({},t.data.status.byId,Object(F.a)({},a,{id:a,title:e.title||"New Column",tasks:[]})),allIds:[].concat(Object(R.a)(t.data.status.allIds),[a])}})),editStatus:Object(B.b)((function(t,e){if(!(null===e||void 0===e?void 0:e.id))return t;t.data.status={byId:Object(K.a)({},t.data.status.byId,Object(F.a)({},e.id,Object(K.a)({},t.data.status.byId[e.id],{title:e.title||t.data.status.byId[e.id].title}))),allIds:Object(R.a)(t.data.status.allIds)}})),createTask:Object(B.b)((function(t,e){var a=Object(A.a)();e.statusId&&(t.data.tasks={byId:Object(K.a)({},t.data.tasks.byId,Object(F.a)({},a,{id:a,content:(null===e||void 0===e?void 0:e.content)||"New Task",priority:"none"})),allIds:[].concat(Object(R.a)(t.data.tasks.allIds),[a])},t.data.status=Object(K.a)({},t.data.status,{byId:Object(K.a)({},t.data.status.byId,Object(F.a)({},e.statusId,Object(K.a)({},t.data.status.byId[e.statusId],{tasks:[].concat(Object(R.a)(t.data.status.byId[e.statusId].tasks),[a])})))}))})),editTask:Object(B.b)((function(t,e){if(!(null===e||void 0===e?void 0:e.id))return t;t.data.tasks={byId:Object(K.a)({},t.data.tasks.byId,Object(F.a)({},e.id,Object(K.a)({},t.data.tasks.byId[e.id],{content:e.content||t.data.tasks.byId[e.id].content}))),allIds:Object(R.a)(t.data.tasks.allIds)}})),deleteTask:Object(B.f)((function(t,e,a){var n=a.getState,s=n().data.tasks,r=n().data.status;t.setTasks(function(t,a){var n=a.byId,s=(n[t],Object(z.a)(n,[t].map(D.a))),r=H.without(a.allIds,e.id);return Object(K.a)({},a,{byId:s,allIds:r})}(e.id,s)),t.setStatus(function(t,e){var a=H.mapValues(e.byId,(function(e){return Object(K.a)({},e,{tasks:H.without(e.tasks,t)})}));return Object(K.a)({},e,{byId:a})}(e.id,r))})),moveTask:Object(B.f)((function(t,e,a){var n=a.getState,s=e.destination,r=e.source,i=e.draggableId;if(s&&(s.droppableId!==r.droppableId||s.index!==r.index)){var o,d=n().data.status.byId[r.droppableId],c=n().data.status.byId[s.droppableId],l=Object(R.a)(d.tasks),u=Object(R.a)(c.tasks);if(s.droppableId===r.droppableId)l.splice(r.index,1),l.splice(s.index,0,i),t.setStatus(Object(K.a)({},n().data.status,{byId:Object(K.a)({},n().data.status.byId,Object(F.a)({},r.droppableId,Object(K.a)({},d,{tasks:l})))}));else l.splice(r.index,1),u.splice(s.index,0,i),t.setStatus(Object(K.a)({},n().data.status,{byId:Object(K.a)({},n().data.status.byId,(o={},Object(F.a)(o,r.droppableId,Object(K.a)({},d,{tasks:l})),Object(F.a)(o,s.droppableId,Object(K.a)({},c,{tasks:u})),o))}))}}))},N=a(63),W=a.n(N),J=a(48),V={tasks:M},X=Object(B.e)(),_=X.useStoreActions,q=(X.useStoreDispatch,X.useStoreState),G={key:"root",storage:W.a},L=Object(B.d)(V,{reducerEnhancer:function(t){return Object(J.a)(G,t)}}),Q=Object(J.b)(L);var U=function(){var t=q((function(t){return t.tasks.tasksByStatus})),e=_((function(t){return t.tasks.moveTask})),a=_((function(t){return t.tasks.createStatus})),n=_((function(t){return t.tasks.editStatus})),r=_((function(t){return t.tasks.editTask})),i=_((function(t){return t.tasks.createTask})),o=_((function(t){return t.tasks.deleteTask}));return s.a.createElement(y.a,{h:"100%",direction:"column"},s.a.createElement(P,null),s.a.createElement(y.a,{flex:1,mt:15,wrap:"nowrap",overflowX:"scroll"},s.a.createElement(l.a,{onDragEnd:e},t.map((function(t){var e=t;return s.a.createElement(C,{key:e.id,column:e,createStatus:a,editStatus:n,editTask:r,createTask:i,deleteTask:o})})),s.a.createElement(C,{key:"new-column",createStatus:a,editStatus:n,editTask:r,createTask:i,deleteTask:o}))))},Y=a(64),Z=function(){return s.a.createElement(B.a,{store:L},s.a.createElement(Y.a,{persistor:Q},s.a.createElement(o.a,null,s.a.createElement(d.a,null,s.a.createElement(c.a,null),s.a.createElement(U,null)))))};a(89);i.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(Z,null)),document.getElementById("root"))}},[[68,1,2]]]);
//# sourceMappingURL=main.505f99fe.chunk.js.map